<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<title>Google Maps JavaScript API Example</title>
<!--導入Google Maps API庫文件。注意將本代碼中的API Key替換為前文申請到的API Key-->
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAA1j86tnUDFv8OAtC8dZVtKRT2yXp_ZAY8_ufC3CFXhHIE1NvwkxSzmwrQ90SNUILzGRpsBiaa860gfQ"
      type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
    //聲明GMap對象
    var map;
    //聲明GPolyline對象
    var polyline;
    
    function load()
    {
      if (GBrowserIsCompatible())
      {
        map = new GMap2(document.getElementById("map"));
        map.setCenter(new GLatLng(39.92, 116.46), 4);
        map.addControl(new GLargeMapControl());
      }
    }
    
    function addPolylineEncoded(){
      polyline  = new GPolyline.fromEncoded({
           color: "#FF00FF",
           weight: 10,
           /*
           points的原始數據為
              new GLatLng(39.92, 116.46)
              new GLatLng(29.59, 106.54)
              new GLatLng(28.01, 120.65)
           */
           points: "_{srF_byeUnq`~@~np{@~qsHozbuA",
           /*
           levels尤其重要
           不正確的值將導致無法在相應縮放級別下顯示折線
           */
           levels: "BBB",
           zoomFactor: 32,
           numLevels: 4
        }); 
      map.addOverlay(polyline);
    }
    
    function removePolyline(){
      polyline.remove();
    }
//]]>
    </script>
  </head>
  <!--加載時調用load()函數加載地圖，注意加上onunload="GUnload()"防止內存泄露-->
  <body onload="load()" onunload="GUnload()">
    <!--以下id為map的DIV元素即為Google地圖的容器-->
    <div id="map" style="width: 500px; height: 400px;"></div>
    <p>
    <input type="button" value="新增編碼後polyline" onclick="addPolylineEncoded()" />
    <input type="button" value="移除編碼後polyline" onclick="removePolyline()" />
    </p>
  </body>
</html>
